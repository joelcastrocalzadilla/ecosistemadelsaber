<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cuenta con Tito el Payasito ðŸ¤¡</title>
  <style>
    body {
      font-family: 'Comic Sans MS', sans-serif;
      text-align: center;
      background: linear-gradient(135deg, #ffecb3, #ffe0b2);
      margin: 0;
      padding: 0;
    }
    #tito {
      font-size: 5em;
      cursor: pointer;
      margin-top: 40px;
      animation: brincar 1.5s infinite alternate;
    }
    @keyframes brincar {
      from { transform: translateY(0); }
      to { transform: translateY(-20px); }
    }
    #contador {
      font-size: 4em;
      color: #d32f2f;
      margin-top: 20px;
    }
    #emojiZona {
      margin-top: 20px;
      font-size: 2em;
    }
    #imagenZona img {
      max-width: 150px;
      margin: 10px;
      animation: aparecer 0.8s ease-out;
    }
    @keyframes aparecer {
      from { transform: scale(0.3); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .confeti {
      position: absolute;
      top: 0;
      font-size: 2em;
      animation: caer 2s linear forwards;
    }
    @keyframes caer {
      to { top: 100%; opacity: 0; }
    }

    /* AnimaciÃ³n de crecer y titilar */
    @keyframes crecerVolver {
      0%   { transform: scale(1); }
      50%  { transform: scale(3); }
      100% { transform: scale(1); }
    }
    @keyframes titilar {
      0%, 100% { opacity: 1; }
      50%      { opacity: 0.3; }
    }
    .numeroAnimado {
      animation: crecerVolver 0.8s ease-out, titilar 1s infinite;
    }

    #mensaje {
      margin-top: 10px;
      font-size: 1.2em;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>Â¡Cuenta con Tito el Payasito! ðŸ¤¡ðŸŽª</h1>
  <div id="tito" onclick="contar()" title="Toca a Tito para contar">ðŸ¤¡</div>
  <div id="contador">0</div>
  <div id="mensaje">Toca a Tito para empezarâ€¦</div>
  <div id="emojiZona"></div>
  <div id="imagenZona"></div>

  <!-- MÃºsica de circo -->
  <audio id="musicaFondo" src="https://joelcastrocalzadilla.github.io/ecosistemadelsaber/videlecircus.mp3" loop></audio>
  <!-- Sonido de triunfo (sube tu propio archivo a GitHub y cambia la ruta si quieres otro) -->
  <audio id="triunfo" src="triunfo.mp3"></audio>

<script>
  let cuenta = 0;
  let musicaActivada = false;

  const contador = document.getElementById("contador");
  const emojiZona = document.getElementById("emojiZona");
  const imagenZona = document.getElementById("imagenZona");
  const triunfo = document.getElementById("triunfo");
  const musica = document.getElementById("musicaFondo");
  const mensaje = document.getElementById("mensaje");

  // Saludo inicial
  window.addEventListener('load', () => {
    decir("Â¡Holaaa! Soy Tito el Payasito. Â¿Listo para contar conmigo? Ãšnete y repite en voz alta: uno, dos, tres... Â¡Toca a Tito para empezar!");
  });

  function decir(texto) {
    speechSynthesis.cancel();
    const voz = new SpeechSynthesisUtterance(texto);
    voz.lang = 'es-ES';
    voz.rate = 0.95;
    voz.pitch = 1.2;
    speechSynthesis.speak(voz);
  }

  // Frases variadas
  const objetosPorNumero = {
    1: "una gorra gigante bailando salsa",
    2: "dos zapatos brincando",
    3: "tres frutas saltando en la pista",
    4: "cuatro frutas bailando en ronda",
    5: "cinco conejos saltarines",
    6: "seis niÃ±os girando como trompos",
    7: "siete gatos curiosos jugando",
    8: "ocho flores moviÃ©ndose con el viento",
    9: "nueve estrellas parpadeando",
    10:"diez payasos haciendo piruetas"
  };

  function fraseConteo(n) {
    const objeto = objetosPorNumero[n] || `${n} cosas divertidas en el circo`;
    const numeroTexto = numeroAtexto(n);
    return `Â¡${numeroTexto}! Como ${objeto}. Ãšnete y repite conmigo: ${numeroTexto}.`;
  }

  function numeroAtexto(n) {
    const mapa = ["cero","uno","dos","tres","cuatro","cinco","seis","siete","ocho","nueve","diez"];
    return mapa[n] || String(n);
  }

  // Solo tienes estas imÃ¡genes
  const imagenes = {
    1: "agorra.png",
    2: "a2zapatos.jpg",
    3: "a3frutas.jpg",
    4: "afrutas.jpg",
    5: "a5conejos.png"
    // del 6 al 10 usarÃ¡ globo.png
  };

  function contar() {
    if (!musicaActivada) {
      musica.play();
      musica.volume = 0.2; // volumen bajo para no molestar
      musicaActivada = true;
      decir("Â¡Que suene el circooo! Â¡Vamos a contar juntos!");
      mensaje.textContent = "Â¡Cuenta tocando a Tito y repite en voz alta!";
    }

    cuenta++;

    contador.innerText = cuenta;

    // Reinicia animaciÃ³n de nÃºmero
    contador.classList.remove("numeroAnimado");
    void contador.offsetWidth; // truco para reiniciar animaciÃ³n
    contador.classList.add("numeroAnimado");

    const frase = fraseConteo(cuenta);
    decir(frase);

    const estrella = document.createElement("span");
    estrella.innerText = ["ðŸŽˆ","ðŸŽ‰","âœ¨","ðŸŽŠ"][Math.floor(Math.random() * 4)];
    emojiZona.appendChild(estrella);

    mostrarImagen(cuenta);

    if (cuenta === 10) {
      lanzarConfeti();
      triunfo.currentTime = 0;
      triunfo.play();
      decir("Â¡Bravooo! Â¡Llegamos al diez! Vamos a repetir nuevamente el conteo hasta el diez.");
      // Reinicia para que la prÃ³xima vez empiece en 1
      cuenta = 0;
    }
  }

  function mostrarImagen(numero) {
    imagenZona.innerHTML = "";
    const img = document.createElement("img");
    img.alt = "IlustraciÃ³n del conteo";
    img.src = imagenes[numero] || "globo.png"; // globo por defecto
    imagenZona.appendChild(img);
  }

  function lanzarConfeti() {
    for (let i = 0; i < 25; i++) {
      const confeti = document.createElement("div");
      confeti.className = "confeti";
      confeti.innerText = ["ðŸŽ‰", "âœ¨", "ðŸŽŠ", "ðŸŽˆ"][Math.floor(Math.random() * 4)];
      confeti.style.left = `${Math.random() * window.innerWidth}px`;
      document.body.appendChild(confeti);
      setTimeout(() => document.body.removeChild(confeti), 2000);
    }
  }
</script>
</body>
</html>
