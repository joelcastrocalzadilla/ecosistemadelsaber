<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Lanza con √°ngulo y fuerza</title>
  <style>
    :root {
      --pelota-size: 2em;
      --canasta-width: 100px;
    }
    body {
      font-family: sans-serif;
      text-align: center;
      background-color: #c8e6c9;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    #campo {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 40px;
      background-color: #2e7d32;
      z-index: 0;
    }
    #escena {
      position: relative;
      height: 400px;
      margin-top: 30px;
      overflow: hidden;
    }
    #nino {
      font-size: 3em;
      position: absolute;
    }
    #canasta {
      position: absolute;
      bottom: 40px;
      right: 50px;
      width: var(--canasta-width);
      height: 100px;
      border: 3px dashed #4caf50;
      border-radius: 20px;
      background-color: #a5d6a7;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-content: flex-start;
      padding: 5px;
      z-index: 1;
    }
    .pelota {
      font-size: var(--pelota-size);
      position: absolute;
    }
    .pelotaAcumulada {
      font-size: 1.5em;
      margin: 3px;
    }
    #controls {
      margin-top: 20px;
    }
    #conteo {
      margin-top: 10px;
    }
    #aciertos {
      font-size: 2.5em;
      color: #1b5e20;
    }
    #intentos {
      font-size: 1.5em;
      color: #4e342e;
    }
    input {
      margin: 5px;
    }
    .confeti {
      position: absolute;
      top: 0;
      font-size: 2em;
      animation: caer 2s linear forwards;
    }
    @keyframes caer {
      to { top: 100%; opacity: 0; }
    }
    .mariposa {
      position: absolute;
      font-size: 2em;
      left: 50%;
      top: 100%;
      transform: translateX(-50%);
      animation: volar 4s ease-out forwards;
      z-index: 2;
    }
    @keyframes volar {
      0% { top: 100%; opacity: 1; }
      100% { top: 50%; opacity: 0; }
    }
    .mensaje {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.5em;
      background: #fff8e1;
      padding: 10px 20px;
      border-radius: 10px;
      color: #4e342e;
      animation: aparecer 2s ease-out;
      z-index: 3;
    }
    @keyframes aparecer {
      0% { transform: scale(0); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    #morrocoy {
      position: absolute;
      bottom: 40px;
      left: 100%;
      font-size: 2.5em;
      cursor: pointer;
      animation: caminarIzquierda 30s linear infinite;
      z-index: 2;
    }
    @keyframes caminarIzquierda {
      0% { left: 100%; }
      100% { left: -100px; }
    }
    #morrocoy::after {
      content: " ü™ß Haz clic aqu√≠";
      font-size: 0.6em;
      margin-left: 10px;
      color: #2e7d32;
    }
    .valor {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.4em;
      background: #fff3e0;
      padding: 12px 24px;
      border-radius: 12px;
      color: #4e342e;
      animation: titilar 1s infinite alternate;
      z-index: 4;
    }
    @keyframes titilar {
      from { opacity: 1; }
      to { opacity: 0.3; }
    }
    .medalla {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4em;
      animation: brillar 2s ease-in-out infinite alternate;
      z-index: 5;
    }
    @keyframes brillar {
      from { opacity: 0.5; transform: scale(1); }
      to { opacity: 1; transform: scale(1.2); }
    }
  </style>
</head>
<body>
  <h1>¬°Lanza con √°ngulo y fuerza!</h1>

  <div id="escena">
    <div id="nino">üßí</div>
    <div id="canasta"></div>
    <div id="campo"></div>
    <div id="morrocoy" onclick="mostrarMensajeValor()">üê¢</div>
  </div>

  <div id="controls">
    √Ångulo: <input type="number" id="angulo" value="45" min="10" max="80">¬∞
    Fuerza: <input type="number" id="fuerza" value="50" min="10" max="150">
    <button onclick="lanzarPelota()">Lanzar</button>
  </div>

  <div id="conteo">
    <div id="aciertos">üèÄ Aciertos: 0</div>
    <div id="intentos">üéØ Intentos: 0</div>
  </div>

  <!-- üéµ Sonidos -->
  <audio id="audiojuego" src="audiojuego.mp3" autoplay loop></audio>
  <audio id="aplausos" src="aplausos.mp3"></audio>
  <audio id="animo" src="animo.mp3"></audio>
  <audio id="triunfo" src="triunfo.mp3"></audio>

<script>
  let aciertos = 0;
  let intentos = 0;

  const escena = document.getElementById("escena");
  const canasta = document.getElementById("canasta");
  const aplausos = document.getElementById("aplausos");
  const animo = document.getElementById("animo");
  const nino = document.getElementById("nino");

  const mensajesMotivacionales = [
    "¬°Soy el mejor!",
    "¬°Con 5 aciertos avanzas de nivel y con 10 aciertos GANAS la medalla de Honor!",
    "Invita a tus padres a competir contigo",
    "¬°Soy muy inteligente!",
    "¬°Soy un luchador!",
    "¬°Puedo hacerlo!",
    "¬°Soy capaz de lograr cualquier cosa!"
  ];

  const mensajesValores = [
    "Debo respetar a mis padres",
    "Debo comer saludable",
    "Debo hacer mis tareas",
    "No debo hablar con extra√±os",
    "Debo cuidar el planeta",
    "Debo ayudar a los dem√°s"
  ];

  function lanzarPelota() {
    intentos++;
    document.getElementById("intentos").innerText = `üéØ Intentos: ${intentos}`;

    const angulo = parseFloat(document.getElementById("angulo").value);
    const fuerza = parseFloat(document.getElementById("fuerza").value);

    const radianes = angulo * Math.PI / 180;
    const velocidadX = Math.cos(radianes) * fuerza;
    const velocidadY = Math.sin(radianes) * fuerza;

    const pelota = document.createElement("div");
    pelota.className = "pelota";
    pelota.innerText = "üèÄ";
    escena.appendChild(pelota);

    const lanzadorX = parseInt(nino.style.left) || 50;
    const lanzadorY = parseInt(nino.style.bottom) || 40;

    let x = lanzadorX;
    let y = lanzadorY;
    let tiempo = 0;

    const intervalo = setInterval(() => {
      tiempo += 0.1;
      x = lanzadorX + velocidadX * tiempo;
      y = lanzadorY + velocidadY * tiempo - 4.9 * tiempo * tiempo;

      pelota.style.left = `${x}px`;
      pelota.style.bottom = `${y}px`;

           if (y < 40) {
        clearInterval(intervalo);
        escena.removeChild(pelota);

        const canastaX = window.innerWidth - 100;

        if (x > canastaX - 50 && x < canastaX + 50) {
          aciertos++;
          const acumulada = document.createElement("div");
          acumulada.className = "pelotaAcumulada";
          acumulada.innerText = "üèÄ";
          canasta.appendChild(acumulada);

          document.getElementById("aciertos").innerText = `üèÄ Aciertos: ${aciertos}`;
          aplausos.play();
          animo.play();
          lanzarConfeti();
          decir(`¬°Acierto n√∫mero ${aciertos}!`);

          // Reiniciar inputs
          document.getElementById("angulo").value = 0;
          document.getElementById("fuerza").value = 0;

          // Mover al lanzador tras acierto
          moverLanzador();

          if (aciertos === 5) {
            document.documentElement.style.setProperty('--pelota-size', '1.2em');
            document.documentElement.style.setProperty('--canasta-width', '70px');
            decir("¬°Nivel 2 desbloqueado! La pelota es m√°s peque√±a y la canasta m√°s angosta.");
          }

          if (aciertos === 10) {
            const medalla = document.createElement("div");
            medalla.className = "medalla";
            medalla.innerText = "ü•á";
            escena.appendChild(medalla);

            document.getElementById("triunfo").play();
            decir("¬°Eres un campe√≥n! Has ganado la medalla de oro.");

            setTimeout(() => escena.removeChild(medalla), 6000);
          }

        } else {
          let mensaje = "";
          if (x > canastaX - 80 && x < canastaX + 80) {
            mensaje = "¬°Estuvo cerca! Intenta otra vez.";
          } else if (fuerza < 40) {
            mensaje = "¬°Dale con m√°s fuerza!";
          } else if (angulo < 30) {
            mensaje = "¬°Aumenta el √°ngulo!";
          } else if (angulo > 70) {
            mensaje = "¬°Disminuye el √°ngulo!";
          } else {
            mensaje = "¬°Piensa bien, cambia el √°ngulo y la fuerza!";
          }

          document.getElementById("aciertos").innerText = `üèÄ Aciertos: ${aciertos}`;
          document.getElementById("intentos").innerText = `üéØ Intentos: ${intentos}`;
          decir(mensaje);
        }
      }
    }, 30);
  }

  function lanzarConfeti() {
    for (let i = 0; i < 20; i++) {
      const confeti = document.createElement("div");
      confeti.className = "confeti";
      confeti.innerText = ["üéâ", "‚ú®", "üéä"][Math.floor(Math.random() * 3)];
      confeti.style.left = `${Math.random() * window.innerWidth}px`;
      escena.appendChild(confeti);
      setTimeout(() => escena.removeChild(confeti), 2000);
    }
  }

  function decir(texto) {
    const voz = new SpeechSynthesisUtterance(texto);
    voz.lang = 'es-ES';
    speechSynthesis.speak(voz);
  }

  function moverLanzador() {
    const maxX = escena.clientWidth - 100; // ancho de la escena
    const nuevaX = Math.floor(Math.random() * maxX);
    const nuevaY = 40; // fijo en el suelo
    nino.style.left = `${nuevaX}px`;
    nino.style.bottom = `${nuevaY}px`;
  }

  function lanzarMariposa() {
    const mariposa = document.createElement("div");
    mariposa.className = "mariposa";
    mariposa.innerText = "ü¶ã";
    escena.appendChild(mariposa);

    setTimeout(() => {
      escena.removeChild(mariposa);
      mostrarMensajeMotivacional();
    }, 4000);
  }

  function mostrarMensajeMotivacional() {
    const mensaje = document.createElement("div");
    mensaje.className = "mensaje";
    const texto = mensajesMotivacionales[Math.floor(Math.random() * mensajesMotivacionales.length)];
    mensaje.innerText = texto;
    escena.appendChild(mensaje);
    decir(texto);
    setTimeout(() => escena.removeChild(mensaje), 4000);
  }

  function mostrarMensajeValor() {
    const mensaje = document.createElement("div");
    mensaje.className = "valor";
    const texto = mensajesValores[Math.floor(Math.random() * mensajesValores.length)];
    mensaje.innerText = texto;
    escena.appendChild(mensaje);
    decir(texto);
    setTimeout(() => escena.removeChild(mensaje), 5000);
  }

  // Iniciar lanzador y mariposas
  moverLanzador();
  setInterval(lanzarMariposa, 20000);
</script>

<script>
window.addEventListener('load', () => {
  const audio = document.getElementById("audiojuego");
  audio.play().catch(() => {
    const boton = document.createElement("button");
    boton.innerText = "üéµ Activar m√∫sica principal";
    boton.style = "position:fixed;top:10px;right:10px;font-size:1em;padding:10px;z-index:999;";
    boton.onclick = () => {
      audio.play();
      boton.remove();
      decir("¬°M√∫sica activada! Que comience la celebraci√≥n.");
    };
    document.body.appendChild(boton);
  });
});
</script>
</body>
</html>
