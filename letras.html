<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Practicando letras con emojis</title>
<style>
  body { font-family: sans-serif; text-align: center; background: #fce4ec; }
  #nombre {
    width: 250px;
    font-size: 1.2em;
    padding: 5px;
    border-radius: 8px;
  }
  input {
    font-size: 2em;
    text-align: center;
    width: 120px;
    margin: 20px;
  }
  button {
    font-size: 1.5em;
    padding: 10px 20px;
    cursor: pointer;
    border-radius: 8px;
    background: #ffccbc;
  }
  #letraMostrada {
    font-size: 6em;
    margin-top: 30px;
    color: #333;
  }
  #imagenes {
    margin-top: 20px;
    font-size: 3em;
  }
  #saludo {
    font-size: 1.5em;
    margin-top: 20px;
    color: #444;
  }
</style>
</head>
<body>
  <h1>Practicando letras</h1>
  <p>Escribe tu nombre:</p>
  <input id="nombre" placeholder="Gabriel">
  <button onclick="iniciar()">Comenzar</button>

  <div id="saludo"></div>

  <div style="margin-top:20px;">
    <input id="entrada" maxlength="1" placeholder="A" oninput="decirLetra()">
  </div>

  <div id="letraMostrada"></div>
  <div id="imagenes"></div>

<script>
let voces = [];
let nombreNiÃ±o = "Gabriel";
let timerInactividad;

// ðŸ”Š Cargar voces disponibles
function cargarVoces(){ 
  voces = speechSynthesis.getVoices(); 
  if (voces.length === 0) {
    setTimeout(cargarVoces, 200);
  }
}
speechSynthesis.onvoiceschanged = cargarVoces;
cargarVoces();

function iniciar(){
  let nombreIngresado = document.getElementById("nombre").value.trim();
  if(nombreIngresado) nombreNiÃ±o = nombreIngresado;
  let mensaje = `Â¡Hola ${nombreNiÃ±o}! ðŸ˜€ Vamos a practicar las letras. Escribe una letra.`;
  document.getElementById("saludo").textContent = mensaje;
  hablar(mensaje);
  reiniciarTimer();
}

function reiniciarTimer(){
  clearTimeout(timerInactividad);
  timerInactividad = setTimeout(()=>{
    let mensaje = `Â¡Ey ${nombreNiÃ±o}! Sigamos practicando, coloca otra letra...`;
    document.getElementById("saludo").textContent = mensaje;
    hablar(mensaje);
  }, 20000);
}

function hablar(texto){
  if (voces.length === 0) voces = speechSynthesis.getVoices();
  let utter = new SpeechSynthesisUtterance(texto);
  utter.lang = "es-ES";
  utter.rate = 0.9;
  let voz = voces.find(v => v.lang.startsWith("es"));
  if(voz) utter.voice = voz;
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}

function decirLetra(){
  reiniciarTimer();
  let letra = document.getElementById("entrada").value.toLowerCase();
  if(!letra.match(/[a-zÃ±]/i)) return;

  document.getElementById("letraMostrada").textContent = letra.toUpperCase();

  const nombres = {
    "a":"a","b":"beee","c":"ce","d":"de","e":"e","f":"efe","g":"ge",
    "h":"hache","i":"i","j":"jota","k":"ka","l":"ele","m":"eme",
    "n":"ene","Ã±":"eÃ±e","o":"o","p":"pe","q":"cu","r":"erre",
    "s":"ese","t":"te","u":"u","v":"uve","w":"uve doble",
    "x":"equis","y":"i griega","z":"zeta"
  };

  const ejemplos = {
    "a":[["aviÃ³n","âœˆï¸"],["Ã¡rbol","ðŸŒ³"],["amigo","ðŸ‘¦"]],
    "b":[["barco","â›µ"],["bola","âš½"],["burro","ðŸ´"]],
    "c":[["casa","ðŸ "],["camiÃ³n","ðŸšš"],["coco","ðŸ¥¥"]],
    "d":[["dado","ðŸŽ²"],["delfÃ­n","ðŸ¬"],["diamante","ðŸ’Ž"]],
    "e":[["elefante","ðŸ˜"],["estrella","â­"],["espejo","ðŸªž"]],
    "f":[["flor","ðŸŒ¸"],["foca","ðŸ¦­"],["fresa","ðŸ“"]],
    "g":[["gato","ðŸ±"],["guitarra","ðŸŽ¸"],["globo","ðŸŽˆ"]],
    "h":[["hoja","ðŸƒ"],["huevo","ðŸ¥š"],["hamburguesa","ðŸ”"]],
    "i":[["iglesia","â›ª"],["isla","ðŸï¸"],["iguana","ðŸ¦Ž"]],
    "j":[["jirafa","ðŸ¦’"],["jugo","ðŸ§ƒ"],["jardÃ­n","ðŸŒ»"]],
    "k":[["koala","ðŸ¨"],["karate","ðŸ¥‹"]],
    "l":[["luna","ðŸŒ™"],["lÃ¡piz","âœï¸"],["leÃ³n","ðŸ¦"]],
    "m":[["mano","âœ‹"],["mesa","ðŸª‘"],["mariposa","ðŸ¦‹"]],
    "n":[["nube","â˜ï¸"],["nido","ðŸªº"],["naranja","ðŸŠ"]],
    "Ã±":[["Ã±andÃº","ðŸª¶"],["niÃ±o","ðŸ‘¦"],["uÃ±a","ðŸ’…"]],
    "o":[["oso","ðŸ»"],["oro","ðŸ¥‡"],["ojo","ðŸ‘ï¸"]],
    "p":[["pÃ¡jaro","ðŸ¦"],["pelota","âš½"],["perro","ðŸ¶"]],
    "q":[["queso","ðŸ§€"],["quinto","5ï¸âƒ£"]],
    "r":[["ratÃ³n","ðŸ­"],["rosa","ðŸŒ¹"],["ropa","ðŸ‘•"]],
    "s":[["sol","â˜€ï¸"],["silla","ðŸª‘"],["sapo","ðŸ¸"]],
    "t":[["taza","â˜•"],["tigre","ðŸ¯"],["tierra","ðŸŒ"]],
    "u":[["uva","ðŸ‡"],["uno","1ï¸âƒ£"],["uÃ±a","ðŸ’…"]],
    "v":[["vaca","ðŸ„"],["vela","ðŸ•¯ï¸"],["ventana","ðŸªŸ"]],
    "w":[["wifi","ðŸ“¶"],["waffle","ðŸ§‡"]],
    "x":[["xilÃ³fono","ðŸŽ¼"],["xenÃ³n","ðŸ’¡"]],
    "y":[["yoyo","ðŸª€"],["yegua","ðŸŽ"],["yema","ðŸ¥š"]],
    "z":[["zapato","ðŸ‘ž"],["zanahoria","ðŸ¥•"],["zorro","ðŸ¦Š"]]
  };

  let nombre = nombres[letra] || letra;
  let lista = ejemplos[letra] || [];

  // âœ… Siempre usamos el nombre de la letra, no la letra aislada
  let textoEjemplos = lista.map(p => `${nombre} de ${p[0]}`).join(". ");

  // âœ… En el mensaje tambiÃ©n usamos "nombre"
  let mensaje = `Escucha bien: la letra ${letra.toUpperCase()} se llama ${nombre}. 
Repito: ${nombre}. ${textoEjemplos}. Muy bien ${nombreNiÃ±o}, ahora coloca una nueva letra.`;

  hablar(mensaje);
  document.getElementById("imagenes").innerHTML = lista.map(p => p[1]).join(" ");
}
</script>
</body>
</html>

